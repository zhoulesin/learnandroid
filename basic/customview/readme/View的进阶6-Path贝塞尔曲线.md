# Path之贝塞尔曲线

## Path常用方法表

| 作用       | 相关方法                                                     | 备注                                                         |
| ---------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 移动起点   | moveTo                                                       | 移动下一次操作的起点                                         |
| 设置终点   | setLastPoint                                                 | 重置当前path中的最后一个点的位置,如果在绘制之前调用,效果和moveTo相同 |
| 连接直线   | lineTo                                                       | 添加上一点到当前点之间的直线到path                           |
| 闭合路径   | close                                                        | 连接第一个点连接到最后一个点,形成一个闭合区域                |
| 添加内容   | addRect,addRoundRect,addOval,addCircle<br />addPath,addArc,arcTo | 添加矩形圆角矩形椭圆圆路径,圆弧,到当前Path                   |
| 是否为空   | isEmpty                                                      | 判断Path是否为空                                             |
| 是否为矩形 | isRect                                                       | 判断path是否是一个矩形                                       |
| 替换路径   | set                                                          | 用新的路径替换到当前路径所有内容                             |
| 偏移路径   | offset                                                       | 对当前路径之前的操作进行偏移不会影响之后的操作               |
| 贝塞尔曲线 | quadTo,cubicTo                                               | 二次三次贝塞尔曲线                                           |
| rXxx       | rMoveTo,rLineTo,...                                          | 基于当前点的坐标系偏移                                       |
| 填充模式   | setFillType,getFillType,isInverseFillType<br />toggleInverseFillType | 设置,获取,判断和切换填充模式                                 |
| 提示方法   | incReserve                                                   | 提示Path还有多少个点等待加入,该方法会让Path优化存储结构      |
| 布尔操作   | op                                                           | 对两个path进行布尔运算                                       |
| 计算边界   | computeBounds                                                | 计算path边界                                                 |
| 重置路径   | reset,rewind                                                 | 清除path中的内容,reset不保留内部的数据结构,但会保留FillType,rewind会保留内部数据结构,不保留FillType |
| 矩阵操作   | transform                                                    | 矩阵变换                                                     |

## 贝塞尔曲线

### 贝塞尔曲线的原理

| 类型   | 作用                     |
| ------ | ------------------------ |
| 数据点 | 确定曲线的起始和结束位置 |
| 控制点 | 确定曲线的弯曲程度       |

### 一阶曲线(直线)

只有数据点,没有控制点

![](./687474703a2f2f7777312e73696e61696d672e636e2f6c617267652f30303558746469326a77316633356f6630343577386a3330386330647771327a2e6a7067.jpg)



### 二阶曲线

两个数据点,一个控制点

![](./687474703a2f2f7777332e73696e61696d672e636e2f6c617267652f30303558746469326a773166333570343931336b376a333038633064773734642e6a7067.jpg)

- 原理:连接AB,BC,并在AB上取点D,BC上取点E,使其满足![](./687474703a2f2f63686172742e676f6f676c65617069732e636f6d2f63686172743f6368743d74782663686c3d25354366726163253742414425374425374241422537442532302533442532302535436672616325374242452537442.png)

![](./687474703a2f2f7777342e73696e61696d672e636e2f6c617267652f30303558746469326a773166333631626a716a32766a3330386330647777656d2e6a7067.jpg)

- 连接DE,取点F,使得![](./687474703a2f2f63686172742e676f6f676c65617069732e636f6d2f63686172743f6368743d74782663686c3d2535436672616325374241442537442537424142253744253230253344253230253543667261632537424245253 (1).png)

![](./687474703a2f2f7777322e73696e61696d672e636e2f6c617267652f30303558746469326a7731663336316f6a653668316a333038633064776467302e6a7067.jpg)

- 这样获取到的点F就是贝塞尔曲线上的一个点

  ![](./68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f332f33642f422543332541397a6965725f325f6269672e676966.gif)

### 三阶曲线

两个数据点,两个控制点

![](./687474703a2f2f7777322e73696e61696d672e636e2f6c617267652f30303558746469326777316633366d7965716375356a333038633064776467322e6a7067.jpg)

![](./68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f642f64622f422543332541397a6965725f335f6269672e676966.gif)



## 让一个圆变成心形

![](./687474703a2f2f7777322e73696e61696d672e636e2f6c617267652f30303558746469326a773166336367326373376c79673330386330653867706e2e676966.gif)

### 分析

- 圆可以由四段三阶贝塞尔曲线组合而成
- 心形也可以由四段三阶贝塞尔曲线组成

![](./687474703a2f2f7777332e73696e61696d672e636e2f6c617267652f3030355874646932677731663363686e70677562336a333038633065377765712e6a7067.jpg)

![](./687474703a2f2f7777322e73696e61696d672e636e2f6c617267652f3030355874646932677731663363686f64303973626a3330386330653737346a2e6a7067.jpg)

- 我们只需要调整数据点和控制点的位置即可

### 核心难点

- 如何得到数据点和控制点的位置

  关于使用绘制圆形的数据点和控制点,数据只需要拿来用就行了

  https://stackoverflow.com/questions/1734745/how-to-create-circle-with-b%C3%A9zier-curves

  对于心形的数据点和控制点,可以由圆形的部分数据点和控制点平移后得到

- 如何达到渐变效果

  渐变就是每次对数据点和控制点稍微一动一点,然后重绘界面,在短时间多次的调整数据点和控制点,使其逐渐接近目标值,通过不断的重绘界面达到一种渐变的效果

  ![](./687474703a2f2f7777322e73696e61696d672e636e2f6c617267652f30303558746469326a77316633636837346577696967333038633065387769632e676966.gif)



















